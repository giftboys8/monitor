<!DOCTYPE html>
<html>
<head>
    <title>API测试</title>
</head>
<body>
    <h1>API测试页面</h1>
    <button onclick="testApplications()">测试应用API</button>
    <button onclick="testServers()">测试服务器API</button>
    <div id="result"></div>
    
    <script>
        function testApplications() {
            console.log('开始测试应用API...');
            fetch('/api/applications')
                .then(response => response.json())
                .then(data => {
                    console.log('应用API响应:', data);
                    document.getElementById('result').innerHTML += '<p>应用API测试成功，数据长度: ' + data.data.length + '</p>';
                })
                .catch(error => {
                    console.error('应用API测试失败:', error);
                    document.getElementById('result').innerHTML += '<p>应用API测试失败: ' + error.message + '</p>';
                });
        }
        
        function testServers() {
            console.log('开始测试服务器API...');
            fetch('/api/servers')
                .then(response => response.json())
                .then(data => {
                    console.log('服务器API响应:', data);
                    document.getElementById('result').innerHTML += '<p>服务器API测试成功，数据长度: ' + data.data.length + '</p>';
                })
                .catch(error => {
                    console.error('服务器API测试失败:', error);
                    document.getElementById('result').innerHTML += '<p>服务器API测试失败: ' + error.message + '</p>';
                });
        }
        
        // 页面加载后自动测试
        window.onload = function() {
            console.log('页面加载完成，开始自动测试...');
            testApplications();
            setTimeout(testServers, 1000);
        };
    </script>
</body>
</html>